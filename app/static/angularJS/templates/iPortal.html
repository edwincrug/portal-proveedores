<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-xs-12">
        <h2>Ordenes</h2>
        <br>
        <div class="row nav-orders">
            <div class="col-sm-4">
                <button ui-sref="admin.pOrder" class="btn btn-block btn-primary btn-outline " type="button">Pendientes</button>
            </div>
            <div class="col-sm-4">
                <button ui-sref="admin.iPortal" class="btn btn-block btn-primary  animated pulse" type="button">Ingresadas</button>
            </div>
            <div class="col-sm-4">
                <button ui-sref="admin.oPaid" class="btn btn-block btn-primary btn-outline" type="button">Pagadas</button>
            </div>
        </div>
    </div>
</div>
<div class="wrapper wrapper-content">
    <div ng-show="visible" class="text-center animated fadeIn">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group has-feedback">
                                <label for="pOrder.nOrder">Orden de compra </label>
                                <input ng-change="changeOrder()" ng-model="order" class="form-control" id="pOrder.nOrder">
                                <i class=""></i>
                            </div>
                        </div>
                        <div class="col-sm-4 hidden-xs">
                            <div class="form-group">
                                <label for="pOrder.nOrder">Empresa </label>
                                <select ng-model="company" class="form-control" ng-change="changeCompany(company)" ng-options="o.emp_nombre for o in companyList track by o.emp_idempresa">
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-4 hidden-xs">
                            <div class="form-group">
                                <label for="pOrder.nOrder">Sucursal</label>
                                <select ng-disabled="!branchSelectVisible" ng-model="branch" class="form-control" ng-change="changeBranch(branch)" ng-options="o.suc_nombre for o in branchList track by o.suc_idsucursal">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-condensed ">
                            <thead>
                                <tr>
                                    <th>Orden de compra</th>
                                    <th>Detalle</th>
                                    <th>Importe</th>
                                    <th>Factura</th>
                                    <th>Fecha validacion</th>
                                    <th>Fecha factura</th>
                                    <th>Recepcion</th>
                                    <th>Estatus</th>
                                    <th>Sustituir</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="order in orderList | company : company
                              | branch:branch | order : order | offset: currentPage*itemsPerPage | limitTo: itemsPerPage">
                                    <td>
                                        {{order.oce_folioorden}}
                                        <br> {{order.per_rfc}}
                                    </td>
                                    <td>
                                        {{order.emp_nombre}}
                                        <br> {{order.suc_nombre}}
                                        <br> {{order.dep_nombre}}
                                    </td>
                                    <td>
                                        {{order.oce_importetotal | currency}}
                                    </td>
                                    <td>
                                        {{order.factura}}
                                        <br>{{order.uuid}}
                                    </td>

                                    <td>
                                        {{order.fechaValidacion | date:"dd/MM/yyyy"}}
                                    </td>
                                    <td>
                                        {{order.fecha_factura | date:"dd/MM/yyyy"}}
                                    </td>
                                    <td>
                                        {{order.Recepcion}}
                                    </td>
                                    <td>
                                        {{order.Estado}}
                                    </td>
                                    <td>
                                        <button ng-click="uploadinvoice(order)" type="button" class="btn btn-block" data-toggle="modal" data-target="#fileModal" name="button">Subir factura</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="admin-pagination">
                        <ul class="pagination">
                            <li ng-class="prevPageDisabled()">
                                <a href ng-click="prevPage()"><i class="fa fa-chevron-left"></i></a>
                            </li>
                            <li ng-repeat="n in range()" ng-class="{active: n == currentPage}" ng-click="setPage(n)">
                                <a href="#">{{n+1}}</a>
                            </li>
                            <li ng-class="nextPageDisabled()">
                                <a href ng-click="nextPage()"><i class="fa fa-chevron-right"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
